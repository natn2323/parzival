<!DOCTYPE html>
<html>

<head>
	<title>Menu Page</title>
	<script>
		function submitClick() {
			var xhttp = new XMLHttpRequest(),
				  method = "POST",
					url = "http://localhost:8124/menu",
					dataElements = document.getElementById('menuForm'),
					labels = document.getElementsByTagName('label'),
					itemName = '',
					key = '',
					quantity = 0,
					dataToSubmit = {'content':[]};

			for (let i = 0; i < labels.length; i++) {
				if (labels[i].htmlFor !== '') {
					itemName = labels[i].textContent;
					key = labels[i].htmlFor;
					quantity = dataElements.elements[key].value;
					dataToSubmit['content'].push({
						'item': itemName,
						'quantity': quantity,
						'price': '$21.23' // insert price here
					});
				}
			} // end for

			xhttp.open(method, url, true);
			xhttp.setRequestHeader('Content-Type', 'application/json');
			xhttp.send(JSON.stringify(dataToSubmit));

			xhttp.onreadystatechange = function() {
				if(xhttp.readyState === 4 && xhttp.status === 200) {
					window.location.href = 'http://localhost:8124/reviewOrder';
				} // end if
			}; // end onready

		} // end submitClick
	</script>
</head>


<body>
	<form id="menuForm">
		<div>
			<input type="number" name="item1_quantity">
			<label for="item1_quantity">Bbq Drumsticks</label>
		</div>
		<div>
			<input type="number" name="item2_quantity">
			<label for="item2_quantity">French Fries</label>
		</div>
		<div>
			<input type="number" name="item3_quantity">
			<label for="item3_quantity">Chick-un Nuggets</label>
		</div>
		<div id="order-submit">
			<button type="button" onclick="submitClick()">Order</button>
		</div>
	</form>
</body>


</html>
